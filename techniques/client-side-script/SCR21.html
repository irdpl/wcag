<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
   <head>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>SCR21: Using functions of the Document Object Model (DOM) to add content to a page | WAI | W3C</title>
      <link rel="stylesheet" href="https://w3.org/WAI/assets/css/style.css" />
      <link rel="stylesheet" href="../base.css" />
   </head>
   <body class="wcag-docs" dir="ltr"><a href="#main" class="button button--skip-link">Idź do treści</a><div class="default-grid with-gap leftcol">
         <aside class="box nav-hack sidebar standalone-resource__sidebar" aria-labelledby="page-contents">
            <nav>
               <header class="box-h" id="page-contents">Page Contents</header>
               <div class="box-i">
                  <nav class="navtoc">
                     <ul id="navbar">
                        <li><a href="#applicability">Applicability</a></li>
                        <li><a href="#description">Description</a></li>
                        <li><a href="#examples">Examples</a></li>
                        <li><a href="#resources">Related Resources</a></li>
                        <li><a href="#tests">Tests</a></li>
                     </ul>
                  </nav>
               </div>
            </nav>
         </aside>
         <main id="main" class="standalone-resource__main">
            <h1><span>Technique SCR21:</span>Using functions of the Document Object Model (DOM) to add content to a page
            </h1>
            <aside class="box">
               <header class="box-h  box-h-icon">
                  					About this Technique
                  				
               </header>
               <div class="box-i">
                  <p>This technique is not referenced from any Understanding document.</p>
               </div>
            </aside>
            <div class="excol-all"></div>
            <section id="applicability">
               <h2>Applicability</h2>
               <p>ECMAScript used inside HTML</p>
               <p>This technique is not referenced from any Understanding document.</p>
            </section>
            <section id="description">
               <h2>Description</h2>
               <p>The objective of this technique is to demonstrate how to use functions of the Document
                  Object Model (DOM) to add content to a page. If the DOM functions are used to add
                  the content, user agents can access the DOM to retrieve the content. The <code class="language-javascript">createElement()</code> function can be used to create elements within the DOM. The <code class="language-javascript">createTextNode()</code> is used to create text associated with elements. The <code class="language-javascript">appendChild()</code>, <code class="language-javascript">removeChild()</code>, <code class="language-javascript">insertBefore()</code>, and <code class="language-javascript">replaceChild()</code> functions are used to add and remove elements and nodes. Other DOM functions are
                  used to assign attributes to the created elements.
               </p>
               <div class="note">
                  
                  <p>When adding focusable elements into the document, do not add <code class="language-html">tabindex</code> attributes to explicitly set the tab order as this can cause problems when adding
                     focusable elements into the middle of a document. Let the default tab order be assigned
                     to the new element by not explicitly setting a tabindex attribute.
                  </p>
                  
               </div>
            </section>
            <section id="examples">
               <h2>Examples</h2>
               <section class="example" id="example-1">
                  <h3>Example 1</h3>
                  <p>This example demonstrates use of client-side scripting to validate a form. If errors
                     are found appropriate error messages are displayed. The example uses the DOM functions
                     to add error notification consisting of a title, a short paragraph explaining that
                     an error has occurred, and a list of errors in an ordered list. The content of the
                     title is written as a link so that it can be used to draw the user's attention to
                     the error using the focus method. Each item in the list is also written as a link
                     that places the focus onto the form field in error when the link is followed.
                  </p>
                  <p>For simplicity, the example just validates two text fields, but can easily be extended
                     to become a generic form handler. Client-side validation should not be the sole means
                     of validation, and should be backed up with server-side validation. The benefit of
                     client-side validation is that you can provide immediate feedback to the user to save
                     them waiting for the errors to come back from the server, and it helps reduce unnecessary
                     traffic to the server.
                  </p>
                  <p>Here is the script that adds the event handlers to the form. If scripting is enabled,
                     the <code class="language-javascript">validateNumbers()</code> function will be called to perform client-side validation before the form is submitted
                     to the server. If scripting is not enabled, the form will be immediately submitted
                     to the server, so validation should also be implemented on the server.
                  </p><pre xml:space="preserve"><code class="language-javascript">window.onload = initialise;
function initialise() {
  // Add an event handler for the number form
  var objForm = document.getElementById('numberform');
  objForm.onsubmit= function(){return validateNumbers(this);};
}</code></pre><p>Here is the validation function.  Note the use of the <code class="language-javascript">createElement()</code>, <code class="language-javascript">createTextNode()</code>, and <code class="language-javascript">appendChild()</code> DOM functions to create the error message elements.
                  </p><pre xml:space="preserve"><code class="language-javascript">function validateNumbers(objForm) {
  // Test whether fields are valid
  var bFirst = isNumber(document.getElementById('num1').value);
  var bSecond = isNumber(document.getElementById('num2').value);
  // If not valid, display errors
  if (!bFirst || !bSecond) {
    var objExisting = document.getElementById('validationerrors');
    var objNew = document.createElement('div');
    var objTitle = document.createElement('h2');
    var objParagraph = document.createElement('p');
    var objList = document.createElement('ol');
    var objAnchor = document.createElement('a');
    var strID = 'firsterror';
    var strError;
    // The heading element will contain a link so that screen readers
    // can use it to place focus - the destination for the link is 
    // the first error contained in a list
    objAnchor.appendChild(document.createTextNode('Errors in Submission'));
    objAnchor.setAttribute('href', '#firsterror');
    objTitle.appendChild(objAnchor);
    objParagraph.appendChild(document.createTextNode('Please review the following'));
    objNew.setAttribute('id', 'validationerrors');
    objNew.appendChild(objTitle);
    objNew.appendChild(objParagraph);

    // Add each error found to the list of errors
    if (!bFirst) {
      strError = 'Please provide a numeric value for the first number';
      objList.appendChild(addError(strError, '#num1', objForm, strID));
      strID = '';
    }
    if (!bSecond) {
      strError = 'Please provide a numeric value for the second number';
      objList.appendChild(addError(strError, '#num2', objForm, strID));
      strID = '';
    }

    // Add the list to the error information
    objNew.appendChild(objList);

    // If there were existing errors, replace them with the new lot,
    // otherwise add the new errors to the start of the form
    if (objExisting) {
      objExisting.parentNode.replaceChild(objNew, objExisting);
    }
    else {
      var objPosition = objForm.firstChild;
      objForm.insertBefore(objNew, objPosition);
    }

    // Place focus on the anchor in the heading to alert
    // screen readers that the submission is in error
    objAnchor.focus();
      
    // Do not submit the form
    objForm.submitAllowed = false;
    return false;
  }
  return true;
}
  
// Function to validate a number
function isNumber(strValue) {
  return (!isNaN(strValue) &amp;&amp; strValue.replace(/^\s+|\s+$/, '') !== '');
}</code></pre><p>Below are the helper functions to create the error message and to set focus to the
                     associated form field.
                  </p><pre xml:space="preserve"><code class="language-javascript">// Function to create a list item containing a link describing the error
// that points to the appropriate form field
function addError(strError, strFragment, objForm, strID) {
  var objAnchor = document.createElement('a');
  var objListItem = document.createElement('li');
  objAnchor.appendChild(document.createTextNode(strError));
  objAnchor.setAttribute('href', strFragment);
  objAnchor.onclick = function(event){return focusFormField(this, event, objForm);};
  objAnchor.onkeypress = function(event){return focusFormField(this, event, objForm);};

  // If strID has a value, this is the first error in the list
  if (strID.length &gt; 0){
    objAnchor.setAttribute('id', strID);
  }
  objListItem.appendChild(objAnchor);
  return objListItem;
}
  
// Function to place focus to the form field in error
function focusFormField(objAnchor, objEvent, objForm) {
  
  // Allow keyboard navigation over links
  if (objEvent &amp;&amp; objEvent.type == 'keypress') {
    if (objEvent.keyCode != 13 &amp;&amp; objEvent.keyCode != 32){
      return true;
    }
  }
  
  // set focus to the form control
  var strFormField = objAnchor.href.match(/[^#]\w*$/);
  objForm[strFormField].focus();
  return false;
}</code></pre><p>Here is the HTML for the example form.</p><pre xml:space="preserve"><code class="language-html">&lt;!doctype html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;ECMAScript Form Validation&lt;/title&gt;
  &lt;script src="validate.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Form Validation&lt;/h1&gt;
  &lt;form id="numberform"&gt;
    &lt;fieldset&gt;
      &lt;legend&gt;Numeric Fields&lt;/legend&gt;
      &lt;div&gt;
        &lt;label for="num1"&gt;Enter first number&lt;/label&gt;
        &lt;input type="text" size="20" name="num1" id="num1"&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;label for="num2"&gt;Enter second number&lt;/label&gt;
        &lt;input type="text" size="20" name="num2" id="num2"&gt;
      &lt;/div&gt;
    &lt;/fieldset&gt;
    &lt;div&gt;
      &lt;input type="submit" name="submit" value="Submit Form"&gt;
    &lt;/div&gt;
  &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p>This example is limited to client-side scripting, and should be backed up with server-side
                     validation. The example is limited to the creation of error messages when client-side
                     scripting is available. 
                     
                  </p>
                  <p class="working-example">Here is a link to a working example: <a href="../../working-examples/script-form-validation/">Form Validation</a> 
                     
                  </p>
               </section>
            </section>
            <section id="resources">
               <h3 style="margin-bottom: 0;">Other sources</h3>
               <p style="margin-bottom: 1.5em;"><em><small>No endorsement implied.</small></em></p>
               <ul>
                  
                  <li><a href="https://webreference.com/javascript/basics/dom/">Introduction to JavaScript's Document Object Model (DOM)</a> from Webreference.com
                  </li>
                  
                  <li><a href="https://www.w3.org/WAI/tutorials/forms/">Web Accessibility Initiative Forms Tutorial</a></li>
                  
               </ul>
            </section>
            <section id="tests">
               <h2>Tests</h2>
               <section class="procedure" id="procedure">
                  <h3>Procedure</h3>
                  
                  <p>For pages that dynamically create new content:</p>
                  
                  <ol>
                     
                     <li>Examine the source code and check that the new content is not created using document.write(),
                        innerHTML, outerHTML, innerText or outerText.
                     </li>
                     
                  </ol>
                  
               </section>
               <section class="results" id="expected-results">
                  <h3>Expected Results</h3>
                  
                  <ul>
                     
                     <li>Check #1 is true.</li>
                     
                  </ul>
                  
               </section>
            </section><a class="button button-backtotop" href="#top"><span>
                  <svg focusable="false" aria-hidden="true" class="icon-arrow-up " viewBox="0 0 26 28">
                     <path d="M25.172 15.172c0 0.531-0.219 1.031-0.578 1.406l-1.172 1.172c-0.375 0.375-0.891 0.594-1.422 0.594s-1.047-0.219-1.406-0.594l-4.594-4.578v11c0 1.125-0.938 1.828-2 1.828h-2c-1.062 0-2-0.703-2-1.828v-11l-4.594 4.578c-0.359 0.375-0.875 0.594-1.406 0.594s-1.047-0.219-1.406-0.594l-1.172-1.172c-0.375-0.375-0.594-0.875-0.594-1.406s0.219-1.047 0.594-1.422l10.172-10.172c0.359-0.375 0.875-0.578 1.406-0.578s1.047 0.203 1.422 0.578l10.172 10.172c0.359 0.375 0.578 0.891 0.578 1.422z"></path>
                  </svg> Początek strony
                  			</span></a></main>
         <aside class="box box-icon box-space-above" id="helpimprove" style="grid-column: 2 / 8; grid-row: 3">
            <header class="box-h  box-h-icon box-h-space-above box-h-icon">
               <svg focusable="false" aria-hidden="true" class="icon-comments" viewBox="0 0 28 28">
                  <path d="M22 12c0 4.422-4.922 8-11 8-0.953 0-1.875-0.094-2.75-0.25-1.297 0.922-2.766 1.594-4.344 2-0.422 0.109-0.875 0.187-1.344 0.25h-0.047c-0.234 0-0.453-0.187-0.5-0.453v0c-0.063-0.297 0.141-0.484 0.313-0.688 0.609-0.688 1.297-1.297 1.828-2.594-2.531-1.469-4.156-3.734-4.156-6.266 0-4.422 4.922-8 11-8s11 3.578 11 8zM28 16c0 2.547-1.625 4.797-4.156 6.266 0.531 1.297 1.219 1.906 1.828 2.594 0.172 0.203 0.375 0.391 0.313 0.688v0c-0.063 0.281-0.297 0.484-0.547 0.453-0.469-0.063-0.922-0.141-1.344-0.25-1.578-0.406-3.047-1.078-4.344-2-0.875 0.156-1.797 0.25-2.75 0.25-2.828 0-5.422-0.781-7.375-2.063 0.453 0.031 0.922 0.063 1.375 0.063 3.359 0 6.531-0.969 8.953-2.719 2.609-1.906 4.047-4.484 4.047-7.281 0-0.812-0.125-1.609-0.359-2.375 2.641 1.453 4.359 3.766 4.359 6.375z"></path>
               </svg>
               <h2> Pomóż ulepszyć tę stronę</h2>
            </header>
            <div class="box-i">
               <p>Podziel się pomysłami, sugestiami lub uwagami za pośrednictwem poczty elektronicznej
                  lub za pośrednictwem GitHub
               </p>
               <div class="button-group"><a href="mailto:kontakt@irdpl.pl?subject=%5BObja%C5%9Bnienia%20i%20Techniki%20Informacja%20zwrotna%5D" class="button"><span>E-mail</span></a><a href="https://github.com/irdpl/wcag/issues/" class="button"><span>Rozwidlenie i edycja na Github</span></a><a href="https://github.com/irdpl/wcag/issues/new" class="button"><span>Zgłoszenie problemu na Github</span></a></div>
            </div>
         </aside>
      </div>
      <footer id="wai-site-footer" class="page-footer default-grid" aria-label="Page">
         <div class="inner" style="grid-column: 2 / 8">
            <p class="note">Ta strona jest nieautoryzowaną polską wersją dokumentu W3C. Dokument może zawierać
               błędne lub nieścisłe tłumaczenia oryginału. Łącze do oryginalnego dokumentu W3C znajduje
               się <a href="#brief">w sekcji W skrócie</a>.
            </p>
            <p><strong>Data:</strong> Aktualizacja 24 October 2024.
            </p>
            <p><strong>Opracowane przez</strong> <a href="https://www.w3.org/groups/wg/ag/participants">uczestników Accessibility Guidelines Working Group (AG WG)</a> (współrzewodniczący: Alastair Campbell, Charles Adams, Rachael Bradley Montgomery.
               Kontakt z obsadą W3C: Michael Cooper).
            </p>
            <p>Treść została opracowana w ramach <a href="https://www.w3.org/WAI/about/projects/#us">projektów WAI-Core</a> finansowanych przez Fundusze federalne USA. Interfejs użytkownika został zaprojektowany
               przez Education and Outreach Working Group (<a href="https://www.w3.org/groups/wg/eowg/participants">EOWG</a>) z udziałem z udziałem Shadi Abou-Zahra, Steve Lee i Shawn Lawton Henry w ramach
               projektu <a href="https://www.w3.org/WAI/about/projects/wai-guide/">WAI-Guide</a>, współfinansowanego przez Komisję Europejską.
            </p>
            <p>Tłumaczenie na język polski zostało wykonane przez: xxx xxx xxx xxx xxx.</p>
            <p>Wydanie polskie zostało przygotowane przez zespół: xxx xxx xxx xxx xxx.</p>
         </div>
      </footer>
      <footer class="site-footer grid-4q" aria-label="Site">
         <div class="q1-start q3-end about">
            <div>
               <p><a class="largelink" href="https://www.irdpl.pl/" dir="auto" translate="no" lang="pl">© Polska Izba Rzemiosła Dostępnościowego</a></p>
               <p>
                  Platforma swobodnej współpracy osób i firm, które zajmują się dostępnością i chcą
                  rozwijać w Polsce rynek rzetelnych usług dostępnościowych
                  
               </p>
            </div>
            <div dir="auto" translate="no" lang="pl">
               <p>
                  					Prawa autorskie do wszystkich materiałów w tej witrynie należą do W3C.<br /> Copyright © 2024 World Wide Web Consortium (<a href="https://www.w3.org/">W3C</a><sup>®</sup>). Zobacz <a href="https://www.w3.org/WAI/about/using-wai-material/" lang="en" hreflang="en">Permission to Use WAI Material</a>.
               </p>
            </div>
         </div>
         <div dir="auto" translate="no" class="q4-start q4-end" lang="en">
            <ul style="margin-bottom:0">
               <li><a href="https://www.irdpl.pl">Nowości</a></li>
               <li><a href="https://biblio.irdpl.pl">Biblioteka Lidera Dostępności</a></li>
               <li><a href="https://www.irdpl.pl/HTML_CodeSniffer">HTML_CodeSniffer</a></li>
            </ul>
         </div>
      </footer>
      <link rel="stylesheet" href="../a11y-light.css" /><script src="../highlight.min.js"></script><script>
      hljs.configure({
        cssSelector: 'pre'
      });
      hljs.highlightAll();
			var translationStrings = {}; /* fix WAI JS */
		</script><script src="https://www.w3.org/WAI/assets/scripts/main.js"></script></body>
</html>